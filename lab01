%{
#include<stdio.h>
#include<string.h>
void fail();
int noofoperands=0;
int noofoperators=0;
char operands[10][10];
char operators[10][10];
int valid=0;
%}
%%
"("valid++;
")" {valid--;
if(valid<0) fail(); }
"+"|"*" {strcpy(operators[noofoperators],yytext);
noofoperators++; }
[0-9]+ {strcpy(operands[noofoperands],yytext);
noofoperands++; }
[^+*]"("[0-9] fail();
[+*]")" fail();
%%

int main()
{
	int i=0;
	printf("Enter a mathematical expression and press ctrl+d for output\n");
	yylex();
	printf("the no of operators are: %d\n the no of operands are: %d\n",noofoperators,noofoperands);

	if(valid==0 && noofoperands-noofoperators==1)
	{
		printf("exp is valid\n");
		printf("the operands are:\n");
		for(i=0;i<noofoperands;i++)
			printf("%s\n",operands[i]);
		printf("the operators are:\n");
		for(i=0;i<noofoperators;i++)
			printf("%s\n",operators[i]);
	}
	else 
	{
		printf("invalid  expression\n");
	}
	return 0;
}
void fail()
{
	printf("the exp is invalid\n");
	exit(0);
}
